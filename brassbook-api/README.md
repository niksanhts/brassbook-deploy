# BrassBook API

## Оглавление

- [Описание](#описание)
- [Технологии](#технологии)
- [Задачи](#задачи)
- [Разработка](#разработка)
- [Как внести изменения](#как-внести-изменения)
- [Формат названий веток](#формат-названий-веток)
- [Формат сообщений коммитов](#формат-сообщений-коммитов)
- [Установка и запуск](#установка-и-запуск)

## Описание

BrassBook API — это серверная часть приложения для управления музыкальными композициями, пользователями и их взаимодействием. API предоставляет функционал для аутентификации, управления пользователями, загрузки и сравнения музыкальных композиций, а также административные функции.

### Структура проекта

```
│
├── app
│   ├── __init__.py
│   ├── main.py
│   ├── routes.py
│   ├── config.py
│   ├── utils.py
│   │
│   ├── core
│   │   ├── __init__.py
│   │   ├── compare_melodies.py 
│   │   ├── auth.py                
│   │   └── crud.py 
│   │   └── email_sender.py
│   │
│   └── dao                 
│       ├── __init__.py
│       ├── models.py 
│       ├── schemas.py
│       └── database.py           
│     
├── tests 
│   ├── __ init__.py
│   ├── auth_test.py 
│   ├── main_test.py  
│   └── compare_melodies_test.py     
│
├── requirements.txt   
├── Dockerfile   
├── docker-compose.yml 
│   
├── nginx
│   └── nginx.conf   
│ 
├── .github
│   └── workflows
│       └── deploy.yml
└── README.md 
```

## Технологии

- **Backend**: FastAPI (Python)
- **Базы данных**:
  - SQLite (для основных данных)
  - MongoDB (для хранения крупных файлов, таких как аудио)
- **Аутентификация**: JWT (JSON Web Tokens)
- **Тестирование**: Pytest
- **Контейнеризация**: Docker, Docker Compose
- **CI/CD**: GitHub Actions
- **Проксирование**: Nginx

## Задачи

### Как использовать этот список

- Выберите задачу, которая вам интересна и соответствует вашим навыкам.
- Создайте новую ветку с названием, соответствующим задаче (например, `bugfix/fix-404-error`).
- После завершения работы над задачей создайте pull request и укажите номер задачи в сообщении (например, "Fixes #101").
- Способ внесения изменений и подробные инструкции можно найти в файле [CONTRIBUTING.md](CONTRIBUTING.md).
- Если у вас есть вопросы или нужна помощь, не стесняйтесь обращаться к команде.

### Исправления

### Функционал

1. **Страница "Личный кабинет"**
   - Авторизация
      - JWT-токен
      - Подключение к базе данных
   - Управление профилем пользователя
   - Фотография профиля

2. **Рассылка сообщений по электронной почте**
   - Отправка сообщений пользователям
   - Управление подписками на рассылки

3. **Страница "Панель администратора"**
   - Управление пользователями
   - Модерация загруженных композиций

4. **Страница "Библиотека"**
   - Просмотр и поиск музыкальных композиций
   - Загрузка новых композиций
   - Фильтрация по жанрам и авторам
   - Редактирование существующих композиций

5. **Страница "Публикации"**
   - Загрузка публикаций
   - Просмотр публикаций
   - Редактирование публикаций
   - Управление комментариями

6. **Страница "Сравнение композиций"**
   - Анализ схожести композиций - готово

### Улучшения

- Добавить поддержку OAuth2 для аутентификации через социальные сети

## Разработка

### Как внести изменения

1. **Сделайте форк репозитория**: Нажмите кнопку "Fork" в правом верхнем углу страницы репозитория на GitHub.

2. **Клонируйте свой форк**: Используйте команду git для клонирования вашего форка на локальную машину:
   ```bash
   git clone https://github.com/ваш_пользователь/ваш_репозиторий.git
   ```

3. **Создайте новую ветку**: Перед внесением изменений создайте новую ветку:
   ```bash
   git checkout -b имя_вашей_ветки
   ```

4. **Внесите изменения**: Внесите необходимые изменения в код. Убедитесь, что вы следуете стилю кода и стандартам проекта.

5. **Закоммитьте изменения**: После внесения изменений закоммитьте их:
   ```bash
   git add .
   git commit -m "Описание ваших изменений"
   ```

6. **Отправьте изменения в ваш форк**: Используйте команду push для отправки изменений:
   ```bash
   git push origin имя_вашей_ветки
   ```

7. **Создайте pull request**: Перейдите на страницу вашего форка на GitHub и нажмите кнопку "Compare & pull request". Опишите ваши изменения и отправьте pull request.

### Формат названий веток

1. **Используйте префиксы**: Префиксы помогают быстро понять, с какой задачей связана ветка. Например:
   - `feature/` для новых функций
   - `bugfix/` или `fix/` для исправлений ошибок
   - `hotfix/` для срочных исправлений
   - `chore/` для рутинных задач (например, обновление зависимостей)
   - `docs/` для изменений в документации

   **Пример**:
   - `feature/add-user-authentication`
   - `bugfix/fix-login-error`
   - `hotfix/urgent-fix-for-issue-123`

2. **Используйте маленькие буквы и дефисы**: Это делает названия веток более читаемыми. Избегайте пробелов и специальных символов.

3. **Краткость и ясность**: Название ветки должно быть достаточно коротким, чтобы его можно было легко прочитать, но при этом информативным, чтобы понять, что в ней делается.

### Формат сообщений коммитов

1. **Используйте императивный стиль**: Пишите сообщения коммитов так, как будто вы даете команду. Например, вместо "Добавил функцию" используйте "Добавить функцию".

2. **Структура сообщения**:
   - **Заголовок**: Краткое описание изменений (до 50 символов).
   - **Пустая строка**: Разделите заголовок и тело пустой строкой.
   - **Тело**: Подробное описание изменений, если это необходимо (рекомендуется не более 72 символов в строке).

   **Пример**:
   ```
   Добавить функцию аутентификации пользователей

   Реализована функция аутентификации с использованием JWT. 
   Добавлены тесты для проверки корректности работы функции.
   ```

3. **Ссылайтесь на задачи или проблемы**: Если ваш коммит связан с задачей или проблемой, укажите ее номер в сообщении. Например:
   ```
   Исправить ошибку 404 на странице профиля (issue #42)
   ```

## Установка и запуск

### Локальная установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/ваш_пользователь/ваш_репозиторий.git
   cd ваш_репозиторий
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. Запустите приложение:
   ```bash
   uvicorn app.main:app --reload
   ```

### Запуск с помощью Docker

1. Соберите и запустите контейнеры:
   ```bash
   docker-compose up --build
   ```

2. Приложение будет доступно по адресу: `http://localhost:8000`.
